# üì¶ Analytics Cursor

## üìå –û–ø–∏—Å–∞–Ω–∏–µ
Analytics Cursor ‚Äî —ç—Ç–æ –∞–Ω–∞–ª–∏—Ç–∏—á–µ—Å–∫–∞—è —Å–∏—Å—Ç–µ–º–∞ –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞ CSV-–ª–æ–≥–æ–≤ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è Cursor (IDE/—Ä–µ–¥–∞–∫—Ç–æ—Ä –∫–æ–¥–∞).
–ü—Ä–æ–µ–∫—Ç –ø–æ–∑–≤–æ–ª—è–µ—Ç –±—ã—Å—Ç—Ä–æ —Ä–∞–∑–≤–æ—Ä–∞—á–∏–≤–∞—Ç—å –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—É—é –¥–∞—à–±–æ—Ä–¥-—Å–∏—Å—Ç–µ–º—É —Å –≥—Ä–∞—Ñ–∏–∫–∞–º–∏ –∏ —Ç–∞–±–ª–∏—Ü–∞–º–∏, –∏—Å–ø–æ–ª—å–∑—É—è Python, FastAPI –∏ Streamlit.

### –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞
–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Å—Ç—Ä–æ–≥–æ —Ç–∏–ø–∏–∑–∏—Ä–æ–≤–∞–Ω–∞ –∏ —Ä–∞–∑–¥–µ–ª–µ–Ω–∞ –Ω–∞ –Ω–µ—Å–∫–æ–ª—å–∫–æ —Å–ª–æ—ë–≤:
- **DTO** (Pydantic) –¥–ª—è –∫–∞–∂–¥–æ–π —Å—Ç—Ä–æ–∫–∏ CSV;
- **CSVRepository** –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å —Ñ–∞–π–ª–∞–º–∏ –∏ –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö;
- **Service Layer** –¥–ª—è –∞–≥—Ä–µ–≥–∞—Ü–∏–π –∏ –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∏;
- **API** (FastAPI) –¥–ª—è –¥–æ—Å—Ç—É–ø–∞ –∫ –∞–≥—Ä–µ–≥–∏—Ä–æ–≤–∞–Ω–Ω—ã–º –¥–∞–Ω–Ω—ã–º;
- **UI** (Streamlit + Plotly) –¥–ª—è –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏–∏ –æ—Ç—á—ë—Ç–æ–≤.

## ‚ö°Ô∏è –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å
- –ó–∞–≥—Ä—É–∑–∫–∞ CSV —Å –ø–æ–ª—è–º–∏:
  - `Date`, `User`, `Kind`, `Model`, `Max Mode`,
  - `Input (w/ Cache Write)`, `Input (w/o Cache Write)`,
  - `Cache Read`, `Output Tokens`, `Total Tokens`, `Requests`;
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ —Å—Ç—Ä–æ–∫ –≤ DTO;
- –¢—Ä–∏ –≥–æ—Ç–æ–≤—ã—Ö –æ—Ç—á—ë—Ç–∞:
  1. üìà *Events per day* (–ª–∏–Ω–µ–π–Ω—ã–π –≥—Ä–∞—Ñ–∏–∫ + —Ç–∞–±–ª–∏—Ü–∞);
  2. üë§ *Tokens per user* (bar chart + —Ç–∞–±–ª–∏—Ü–∞);
  3. ü§ñ *Tokens by model* (pie chart + —Ç–∞–±–ª–∏—Ü–∞);
- –ì–∏–±–∫–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –¥–ª—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –Ω–æ–≤—ã—Ö –≥—Ä–∞—Ñ–∏–∫–æ–≤ –∏ –º–µ—Ç—Ä–∏–∫;
- –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å —Ä–∞—Å—à–∏—Ä–∏—Ç—å —Å–∏—Å—Ç–µ–º—É —Å–∞–º–º–∞—Ä–∏/—á–∞—Ç-–±–æ—Ç–æ–º –≤ –±—É–¥—É—â–µ–º.

## üóÇ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è
```
analytics-cursor/
‚îú‚îÄ‚îÄ backend/           # FastAPI + —Å–µ—Ä–≤–∏—Å–Ω—ã–π —Å–ª–æ–π, —Ç–µ—Å—Ç—ã
‚îú‚îÄ‚îÄ frontend/          # Streamlit-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —Å –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è–º–∏
‚îî‚îÄ‚îÄ docker-compose.yml # –ó–∞–ø—É—Å–∫ —Å—Ç–µ–∫–∞ —á–µ—Ä–µ–∑ Docker Compose
```

## üöÄ –ó–∞–ø—É—Å–∫ —á–µ—Ä–µ–∑ Docker Compose
1. –°–∫–ª–æ–Ω–∏—Ä–æ–≤–∞—Ç—å —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π:
   ```bash
   git clone https://github.com/mishka-k/analytics-cursor.git
   cd analytics-cursor
   ```
2. –ü–æ–ª–æ–∂–∏—Ç—å CSV-—Ñ–∞–π–ª—ã –≤ –ø–∞–ø–∫—É `data/`.
3. –°–æ–±—Ä–∞—Ç—å –∏ –∑–∞–ø—É—Å—Ç–∏—Ç—å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã:
   ```bash
   docker-compose up --build
   ```
4. –î–æ—Å—Ç—É–ø –∫ —Å–µ—Ä–≤–∏—Å–∞–º:
   - Backend API: http://localhost:8000/docs
   - Frontend (–¥–∞—à–±–æ—Ä–¥): http://localhost:8501

## üß™ –¢–µ—Å—Ç—ã
–¢–µ—Å—Ç—ã —Ä–∞—Å–ø–æ–ª–æ–∂–µ–Ω—ã –≤ `backend/app/tests` –∏ –∏—Å–ø–æ–ª—å–∑—É—é—Ç `pytest`.

### –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤
```bash
cd backend
pytest --maxfail=1 --disable-warnings -q
```

### –ü–æ–∫—Ä—ã—Ç–∏–µ –∫–æ–¥–∞
```bash
pytest --cov=app --cov-report=term-missing
```

## üõ† –¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏
- Python 3.11
- FastAPI
- Pydantic
- pandas
- Streamlit
- Plotly
- Docker, Docker Compose
- pytest
